javascript:(function()%7Bjavascript%3A(function()%7B%0A%20%20function%20getChatUrl()%7Bconst%20m%3Dwindow.location.pathname.match(%2F%5C%2Fc%5C%2F%5Ba-zA-Z0-9%5C-%5D%2B%2F)%3Breturn%20m%3Fwindow.location.origin%2Bm%5B0%5D%3Awindow.location.href%3B%7D%0A%20%20function%20getAssistantMessages()%7Breturn%20Array.from(document.querySelectorAll('%5Bdata-message-author-role%3D%22assistant%22%5D%5Bdata-message-id%5D'))%3B%7D%0A%20%20const%20LS_KEY%3D'chatgpt_favorites_v1'%3B%0A%20%20function%20getFavorites()%7Btry%7Breturn%20JSON.parse(localStorage.getItem(LS_KEY)%7C%7C'%5B%5D')%3B%7Dcatch%7Breturn%5B%5D%3B%7D%7D%0A%20%20function%20saveFavorites(favs)%7BlocalStorage.setItem(LS_KEY%2CJSON.stringify(favs))%3B%7D%0A%20%20function%20decorateMessages()%7B%0A%20%20%20%20getAssistantMessages().forEach(msg%3D%3E%7B%0A%20%20%20%20%20%20if(msg.querySelector('.fav-star-bookmarklet'))return%3B%0A%20%20%20%20%20%20const%20id%3Dmsg.getAttribute('data-message-id')%3B%0A%20%20%20%20%20%20const%20url%3DgetChatUrl()%3B%0A%20%20%20%20%20%20const%20favs%3DgetFavorites()%3B%0A%20%20%20%20%20%20const%20isFav%3Dfavs.some(f%3D%3Ef.chatUrl%3D%3D%3Durl%26%26f.messageId%3D%3D%3Did)%3B%0A%20%20%20%20%20%20const%20star%3Ddocument.createElement('span')%3B%0A%20%20%20%20%20%20star.textContent%3DisFav%3F'%E2%AD%90'%3A'%E2%98%86'%3B%0A%20%20%20%20%20%20star.className%3D'fav-star-bookmarklet'%3B%0A%20%20%20%20%20%20star.style.cssText%3D'cursor%3Apointer%3Bfont-size%3A1.3em%3Buser-select%3Anone%3Bfloat%3Aright%3Bmargin-left%3A0.5em%3Btransition%3Acolor%200.2s%3B'%3B%0A%20%20%20%20%20%20star.title%3DisFav%3F%22Remove%20from%20favorites%22%3A%22Add%20to%20favorites%22%3B%0A%20%20%20%20%20%20star.onclick%3De%3D%3E%7B%0A%20%20%20%20%20%20%20%20e.stopPropagation()%3B%0A%20%20%20%20%20%20%20%20let%20favs%3DgetFavorites()%3B%0A%20%20%20%20%20%20%20%20if(favs.some(f%3D%3Ef.chatUrl%3D%3D%3Durl%26%26f.messageId%3D%3D%3Did))%7B%0A%20%20%20%20%20%20%20%20%20%20favs%3Dfavs.filter(f%3D%3E!(f.chatUrl%3D%3D%3Durl%26%26f.messageId%3D%3D%3Did))%3B%0A%20%20%20%20%20%20%20%20%20%20star.textContent%3D'%E2%98%86'%3B%0A%20%20%20%20%20%20%20%20%7Delse%7B%0A%20%20%20%20%20%20%20%20%20%20favs.push(%7BchatUrl%3Aurl%2CmessageId%3Aid%2Csnippet%3Amsg.textContent.slice(0%2C80).replace(%2F%5Cs%2B%2Fg%2C'%20')%2Ctimestamp%3ADate.now()%7D)%3B%0A%20%20%20%20%20%20%20%20%20%20star.textContent%3D'%E2%AD%90'%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20saveFavorites(favs)%3B%0A%20%20%20%20%20%20%20%20star.title%3Dstar.textContent%3D%3D%3D'%E2%AD%90'%3F%22Remove%20from%20favorites%22%3A%22Add%20to%20favorites%22%3B%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20msg.insertBefore(star%2Cmsg.firstChild)%3B%0A%20%20%20%20%7D)%3B%0A%20%20%7D%0A%20%20const%20obs%3Dnew%20MutationObserver(()%3D%3E%7BsetTimeout(decorateMessages%2C200)%3B%7D)%3B%0A%20%20obs.observe(document.body%2C%7BchildList%3Atrue%2Csubtree%3Atrue%7D)%3B%0A%20%20decorateMessages()%3B%0A%20%20function%20chatTitleFromSnippet(snippets)%7B%0A%20%20%20%20if(snippets.length%3D%3D1)%20return%20snippets%5B0%5D.slice(0%2C32)%2B%22...%22%3B%0A%20%20%20%20let%20all%3Dsnippets.join(%22%20%22).split(%22%20%22).filter(w%3D%3Ew.length%3E2)%3B%0A%20%20%20%20let%20freq%3D%7B%7D%3Ball.forEach(w%3D%3Efreq%5Bw%5D%3D(freq%5Bw%5D%7C%7C0)%2B1)%3B%0A%20%20%20%20let%20common%3DObject.entries(freq).sort((a%2Cb)%3D%3Eb%5B1%5D-a%5B1%5D).slice(0%2C4).map(e%3D%3Ee%5B0%5D)%3B%0A%20%20%20%20return%20common.length%3Fcommon.join(%22%20%22)%3Asnippets%5B0%5D.slice(0%2C32)%2B%22...%22%3B%0A%20%20%7D%0A%20%20function%20showFavPanel()%7B%0A%20%20%20%20if(document.getElementById('fav-panel-bookmarklet'))return%3B%0A%20%20%20%20const%20panel%3Ddocument.createElement('div')%3B%0A%20%20%20%20panel.id%3D'fav-panel-bookmarklet'%3B%0A%20%20%20%20panel.style.cssText%3D'position%3Afixed%3Btop%3A64px%3Bright%3A24px%3Bz-index%3A99999%3Bbackground%3Awhite%3Bcolor%3Ablack%3Bbox-shadow%3A0%202px%2016px%20%23888%3Bborder-radius%3A12px%3Bmax-width%3A350px%3Bwidth%3A92vw%3Bpadding%3A0.7em%200.8em%3Bfont-family%3Asans-serif%3Bmax-height%3A66vh%3Boverflow%3Aauto%3Bfont-size%3A13px%3B'%3B%0A%20%20%20%20panel.innerHTML%3D'%3Cdiv%20style%3D%22font-weight%3Abold%3Bfont-size%3A14px%3Bmargin-bottom%3A0.3em%3B%22%3E%E2%AD%90%20Favorites%20%3Cbutton%20id%3D%22close-fav-bookmarklet%22%20style%3D%22float%3Aright%3Bfont-size%3A1.1em%3Bborder%3Anone%3Bbackground%3Atransparent%3Bcursor%3Apointer%3B%22%3E%26times%3B%3C%2Fbutton%3E%3C%2Fdiv%3E%3Cdiv%20style%3D%22margin-bottom%3A0.5em%3B%22%3E%3Cbutton%20id%3D%22export-fav-bookmarklet%22%20style%3D%22font-size%3A12px%3Bmargin-right%3A0.8em%3B%22%3E%E2%AC%87%EF%B8%8F%20Export%3C%2Fbutton%3E%3Cbutton%20id%3D%22import-fav-bookmarklet%22%20style%3D%22font-size%3A12px%3B%22%3E%E2%AC%86%EF%B8%8F%20Import%3C%2Fbutton%3E%3Cinput%20type%3D%22file%22%20id%3D%22import-fav-file%22%20accept%3D%22application%2Fjson%22%20style%3D%22display%3Anone%3B%22%3E%3C%2Fdiv%3E%3Cdiv%20id%3D%22fav-list-bookmarklet%22%3E%3C%2Fdiv%3E'%3B%0A%20%20%20%20document.body.appendChild(panel)%3B%0A%20%20%20%20document.getElementById('close-fav-bookmarklet').onclick%3D()%3D%3Epanel.remove()%3B%0A%20%20%20%20%2F%2F%20Export%0A%20%20%20%20document.getElementById('export-fav-bookmarklet').onclick%3Dfunction()%7B%0A%20%20%20%20%20%20const%20favs%3DgetFavorites()%3B%0A%20%20%20%20%20%20const%20blob%3Dnew%20Blob(%5BJSON.stringify(favs%2Cnull%2C2)%5D%2C%7Btype%3A%22application%2Fjson%22%7D)%3B%0A%20%20%20%20%20%20const%20url%3DURL.createObjectURL(blob)%3B%0A%20%20%20%20%20%20const%20a%3Ddocument.createElement('a')%3B%0A%20%20%20%20%20%20a.href%3Durl%3Ba.download%3D%22chatgpt-favorites.json%22%3B%0A%20%20%20%20%20%20document.body.appendChild(a)%3Ba.click()%3BsetTimeout(()%3D%3E%7Bdocument.body.removeChild(a)%3BURL.revokeObjectURL(url)%3B%7D%2C100)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20%2F%2F%20Import%0A%20%20%20%20document.getElementById('import-fav-bookmarklet').onclick%3Dfunction()%7B%0A%20%20%20%20%20%20document.getElementById('import-fav-file').click()%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20document.getElementById('import-fav-file').onchange%3Dfunction(e)%7B%0A%20%20%20%20%20%20const%20file%3De.target.files%5B0%5D%3B%0A%20%20%20%20%20%20if(!file)return%3B%0A%20%20%20%20%20%20const%20reader%3Dnew%20FileReader()%3B%0A%20%20%20%20%20%20reader.onload%3Dfunction(ev)%7B%0A%20%20%20%20%20%20%20%20try%7B%0A%20%20%20%20%20%20%20%20%20%20const%20imported%3DJSON.parse(ev.target.result)%3B%0A%20%20%20%20%20%20%20%20%20%20let%20favs%3DgetFavorites()%3B%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20Merge%20by%20(chatUrl%2C%20messageId)%2C%20keeping%20newest%0A%20%20%20%20%20%20%20%20%20%20const%20byKey%3D%7B%7D%3B%0A%20%20%20%20%20%20%20%20%20%20favs.concat(imported).forEach(f%3D%3E%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20key%3Df.chatUrl%2B%22%7C%7C%22%2Bf.messageId%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if(!byKey%5Bkey%5D%7C%7Cf.timestamp%3EbyKey%5Bkey%5D.timestamp)%20byKey%5Bkey%5D%3Df%3B%0A%20%20%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20%20%20%20%20const%20merged%3DObject.values(byKey)%3B%0A%20%20%20%20%20%20%20%20%20%20saveFavorites(merged)%3B%0A%20%20%20%20%20%20%20%20%20%20alert(%22Imported!%20Favorites%20merged%3A%20%22%2Bmerged.length)%3B%0A%20%20%20%20%20%20%20%20%20%20renderFavList()%3B%0A%20%20%20%20%20%20%20%20%20%20decorateMessages()%3B%0A%20%20%20%20%20%20%20%20%7Dcatch(err)%7Balert(%22Error%20importing%20favorites%3A%20%22%2Berr)%3B%7D%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20reader.readAsText(file)%3B%0A%20%20%20%20%20%20this.value%3D%22%22%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20renderFavList()%3B%0A%20%20%7D%0A%20%20function%20renderFavList()%7B%0A%20%20%20%20const%20favs%3DgetFavorites().sort((a%2Cb)%3D%3Eb.timestamp-a.timestamp)%3B%0A%20%20%20%20const%20list%3Ddocument.getElementById('fav-list-bookmarklet')%3B%0A%20%20%20%20if(!favs.length)%7Blist.innerHTML%3D%22%3Cdiv%20style%3D'color%3A%23888%3B'%3ENo%20favorites%20yet.%3C%2Fdiv%3E%22%3Breturn%3B%7D%0A%20%20%20%20%2F%2F%20Group%20by%20chatUrl%0A%20%20%20%20let%20grouped%3D%7B%7D%3B%0A%20%20%20%20favs.forEach(f%3D%3E%7B%0A%20%20%20%20%20%20if(!grouped%5Bf.chatUrl%5D)grouped%5Bf.chatUrl%5D%3D%5B%5D%3B%0A%20%20%20%20%20%20grouped%5Bf.chatUrl%5D.push(f)%3B%0A%20%20%20%20%7D)%3B%0A%20%20%20%20list.innerHTML%3DObject.keys(grouped).map((chatUrl%2Cidx)%3D%3E%7B%0A%20%20%20%20%20%20const%20snippets%3Dgrouped%5BchatUrl%5D.map(f%3D%3Ef.snippet)%3B%0A%20%20%20%20%20%20const%20title%3DchatTitleFromSnippet(snippets)%3B%0A%20%20%20%20%20%20return%20%60%3Cdiv%20style%3D%22margin-bottom%3A0.4em%3B%22%3E%0A%20%20%20%20%20%20%20%20%3Cdiv%20style%3D%22font-weight%3Abold%3Bfont-size%3A13px%3Bcolor%3A%233d5a80%3Bwhite-space%3Anowrap%3Boverflow%3Ahidden%3Btext-overflow%3Aellipsis%3Bmax-width%3A95%25%3B%22%3E%24%7Btitle%7D%3C%2Fdiv%3E%0A%20%20%20%20%20%20%20%20%3Cdiv%20style%3D%22margin-left%3A0.9em%3B%22%3E%0A%20%20%20%20%20%20%20%20%20%20%24%7Bgrouped%5BchatUrl%5D.map(f%3D%3E%60%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20style%3D%22margin%3A0.3em%200%200.2em%200%3Bpadding%3A0.18em%200.2em%3Bborder-left%3A2px%20solid%20%23eee%3B%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Ca%20href%3D%22%24%7Bf.chatUrl%7D%23%24%7Bf.messageId%7D%22%20class%3D%22fav-jump-link%22%20style%3D%22font-size%3A12px%3Btext-decoration%3Anone%3Bcolor%3A%23222%3B%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%24%7Bf.snippet.replace(%2F%5B%3C%3E%22'%5D%2Fg%2C%22%22)%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C%2Fa%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cbutton%20data-id%3D%22%24%7Bf.messageId%7D%22%20data-url%3D%22%24%7Bf.chatUrl%7D%22%20style%3D%22background%3Atransparent%3Bcolor%3A%23d00%3Bborder%3Anone%3Bcursor%3Apointer%3Bfont-size%3A1.1em%3Bmargin-left%3A0.5em%3B%22%20title%3D%22Remove%20from%20favorites%22%3E%26times%3B%3C%2Fbutton%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C%2Fdiv%3E%0A%20%20%20%20%20%20%20%20%20%20%60).join('')%7D%0A%20%20%20%20%20%20%20%20%3C%2Fdiv%3E%0A%20%20%20%20%20%20%3C%2Fdiv%3E%60%3B%0A%20%20%20%20%7D).join('')%3B%0A%20%20%20%20list.querySelectorAll('button%5Bdata-id%5D').forEach(btn%3D%3E%7B%0A%20%20%20%20%20%20btn.onclick%3Dfunction(e)%7B%0A%20%20%20%20%20%20%20%20e.preventDefault()%3B%0A%20%20%20%20%20%20%20%20let%20favs%3DgetFavorites()%3B%0A%20%20%20%20%20%20%20%20favs%3Dfavs.filter(f%3D%3E!(f.chatUrl%3D%3D%3Dbtn.getAttribute('data-url')%26%26f.messageId%3D%3D%3Dbtn.getAttribute('data-id')))%3B%0A%20%20%20%20%20%20%20%20saveFavorites(favs)%3B%0A%20%20%20%20%20%20%20%20renderFavList()%3B%0A%20%20%20%20%20%20%20%20decorateMessages()%3B%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%7D)%3B%0A%20%20%20%20list.querySelectorAll('.fav-jump-link').forEach(link%3D%3E%7B%0A%20%20%20%20%20%20link.onclick%3Dfunction(e)%7B%0A%20%20%20%20%20%20%20%20const%5Bbase%2Chash%5D%3Dthis.href.split('%23')%3B%0A%20%20%20%20%20%20%20%20if(window.location.href.startsWith(base))%7B%0A%20%20%20%20%20%20%20%20%20%20e.preventDefault()%3B%0A%20%20%20%20%20%20%20%20%20%20document.getElementById('fav-panel-bookmarklet')%3F.remove()%3B%0A%20%20%20%20%20%20%20%20%20%20setTimeout(()%3D%3E%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20el%3Ddocument.querySelector(%60%5Bdata-message-id%3D%22%24%7Bhash%7D%22%5D%60)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if(el)%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20el.scrollIntoView(%7Bbehavior%3A%22smooth%22%2Cblock%3A%22center%22%7D)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20el.style.boxShadow%3D%220%200%2014px%204px%20gold%22%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20setTimeout(()%3D%3Eel.style.boxShadow%3D%22%22%2C1500)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C80)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%7D)%3B%0A%20%20%7D%0A%20%20if(!document.getElementById('fav-btn-bookmarklet'))%7B%0A%20%20%20%20const%20btn%3Ddocument.createElement('button')%3B%0A%20%20%20%20btn.id%3D'fav-btn-bookmarklet'%3B%0A%20%20%20%20btn.innerHTML%3D'%E2%AD%90%20Favorites'%3B%0A%20%20%20%20btn.style.cssText%3D'position%3Afixed%3Btop%3A16px%3Bright%3A24px%3Bz-index%3A99999%3Bbackground%3A%23fff%3Bcolor%3A%23444%3Bborder-radius%3A2em%3Bborder%3A2px%20solid%20%23ccc%3Bfont-size%3A0.97em%3Bpadding%3A0.23em%200.85em%3Bbox-shadow%3A0%202px%206px%20%23888%3Bcursor%3Apointer%3B'%3B%0A%20%20%20%20btn.onclick%3DshowFavPanel%3B%0A%20%20%20%20document.body.appendChild(btn)%3B%0A%20%20%7D%0A%7D)()%3B%7D)()%3B
